var canvas = document.getElementById("canvas");var ctx = canvas.getContext("2d");var data = {	m: 0.150,// масса	v: 20,// скорость	r: 0.033,// радиус	g: 9.8,// свободное подение	k: 10,// маштаб	C: 0.4,// коэффициент обтекаемости	p: 1.23,// плотность среды	delay: 0,// задержка анимации};var count = 0;var hmax = 0;var dt = 0.1;// шагvar t = 0;var a = 0;// ускорениеvar Vo = (4 / 3) * Math.PI * (data.r * data.r * data.r);// площадь шараvar F = 0;var S = Math.PI * (data.r * data.r);// поперечное сечениеvar y = 0;var x = canvas.width / 2;var intervalID;drawCircle();function drawCircle() {	ctx.beginPath();	ctx.fillStyle = "red";	ctx.arc(x, (canvas.height - data.r * 300) - y / data.k, data.r * 300, 0, Math.PI * 2);	ctx.fill();}function updateData() {	var error = false;	drawCircle();	for(var i in data) {		data[i] = document.getElementById(i).value;		data[i] = parseFloat(data[i], 10);		if(isNaN(data[i])) {			document.getElementById(i).style.borderLeft = "1px solid red";			error = true;		} else {			document.getElementById(i).style.borderLeft = "0";		}	}	hmax = 0;	dt = 0.01;	y = 0;	x = canvas.width / 2;	t = 0;	a = 0;	Vo = (4 / 3) * Math.PI * (data.r * data.r * data.r);	F = 0;	S = Math.PI * (data.r * data.r);	y = 0;	x = canvas.width / 2;	if(error) {		return false;	}	return true;}window.onload = function() {	document.getElementById("start").onclick = function() {		if(count == 0) {			startEngine();			document.getElementById("start").value = "stop";			count = 1;		} else if(count == 1) {			stopEngine();			document.getElementById("start").value = "resume";			count = 2;		} else {			resumeEngine();			document.getElementById("start").value = "stop";			count = 1;		}	};	document.getElementById("clear").onclick = function() {		clearInterval(intervalID);		count = 0;		document.getElementById("start").value = "start"		document.getElementById("v").value = "20";		document.getElementById("m").value = "0.150";		document.getElementById("r").value = "0.033";		document.getElementById("g").value = "9.8";		document.getElementById("k").value = "10";		document.getElementById("C").value = "0.4";		document.getElementById("p").value = "1.23";		updateData();		ctx.clearRect(0, 0, canvas.width, canvas.height);		drawCircle();	};};var hmax = 0;function engine() {	F = -data.m * data.g - ((S * data.C * data.p * Math.abs(data.v) * data.v) / 2) + data.p * Vo * data.g;	a = F / data.m;	y = y + data.v + (a * (dt * dt) / 2);	data.v = data.v + a * dt;	if(y <= 0 ) {		clearInterval(intervalID);		document.getElementById("start").value = "start";		count = 0;	}	document.getElementById("v").value = "" + Math.abs(data.v);	if(y < 0)		y = 0;	document.getElementById("h").value = "" + parseInt(y, 10) / 100;	if(y > hmax)		hmax = y;	document.getElementById("hmax").value = "" + parseInt(hmax, 10) / 100;	ctx.clearRect(0, 0, canvas.width, canvas.height);	drawCircle();}function startEngine() {	if(updateData()) {		intervalID = setInterval(engine, data.delay);	}}function resumeEngine() {	intervalID = setInterval(engine, data.delay);}function stopEngine() {	clearInterval(intervalID);}